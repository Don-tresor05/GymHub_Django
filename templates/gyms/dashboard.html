{% extends 'base.html' %}
{% block title %}{{ title }} - GymHub Rwanda{% endblock %}
{% block content %}
<div class="row pt-4 pb-5">
    <!-- Header -->
    <div class="col-12 mb-4">
        <h2 class="fw-bold"><i class="fas fa-th-large text-primary me-2"></i> {{ title }}</h2>
        <p class="text-muted">Welcome back! Here is what's happening at your gyms today.</p>
    </div>

    <!-- Quick Stats -->
    <div class="col-md-4 mb-4">
        <div class="card glass-card border-0 shadow-sm p-4 h-100 position-relative overflow-hidden">
            <div class="stat-icon-bg"><i class="fas fa-users"></i></div>
            <h6 class="text-uppercase fw-bold text-secondary smaller mb-3">Total Members</h6>
            <h2 class="fw-bold mb-0">{{ total_members }}</h2>
            <div class="mt-3 small text-success">
                <i class="fas fa-arrow-up me-1"></i> Active members
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card glass-card border-0 shadow-sm p-4 h-100 position-relative overflow-hidden">
            <div class="stat-icon-bg"><i class="fas fa-wallet text-success"></i></div>
            <h6 class="text-uppercase fw-bold text-secondary smaller mb-3">Total Revenue</h6>
            <h2 class="fw-bold mb-0">{{ total_revenue }} <span class="smaller fw-normal">RWF</span></h2>
            <div class="mt-3 small text-muted">
                From completed transactions
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-4">
        <div class="card glass-card border-0 shadow-sm p-4 h-100 position-relative overflow-hidden">
            <div class="stat-icon-bg"><i class="fas fa-calendar-alt text-warning"></i></div>
            <h6 class="text-uppercase fw-bold text-secondary smaller mb-3">Your Gyms</h6>
            <h2 class="fw-bold mb-0">{{ gyms|length }}</h2>
            <div class="mt-3 small text-muted">
                Active branches
            </div>
        </div>
    </div>

    <!-- Tables and Details -->
    <div class="col-lg-8 mb-4">
        <div class="card glass-card border-0 shadow-sm p-4">
            <h5 class="fw-bold mb-4">Upcoming Classes</h5>
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="bg-light">
                        <tr>
                            <th class="border-0 small text-uppercase">Class Name</th>
                            <th class="border-0 small text-uppercase">Time</th>
                            <th class="border-0 small text-uppercase">Gym</th>
                            <th class="border-0 small text-uppercase">Capacity</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for class in upcoming_classes %}
                        <tr>
                            <td class="fw-bold">{{ class.name }}</td>
                            <td>{{ class.start_time|date:"M d, H:i" }}</td>
                            <td>{{ class.gym.name }}</td>
                            <td><span class="badge bg-light text-dark border">{{ class.capacity }} spots</span></td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="4" class="text-center py-5 text-muted">
                                <i class="fas fa-calendar-times mb-2 d-block fa-2x opacity-25"></i>
                                No upcoming classes scheduled.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="text-end mt-3">
                <a href="#" class="btn btn-outline-primary btn-sm px-4 rounded-pill fw-bold">Manage All Classes</a>
            </div>
        </div>
    </div>

    <!-- Sidebar Info -->
    <div class="col-lg-4">
        <div class="card glass-card border-0 shadow-sm p-4 mb-4">
            <h5 class="fw-bold mb-4">Quick Actions</h5>
            <div class="d-grid gap-2">
                <a href="#" class="btn btn-primary text-start shadow-sm py-2 px-3 fw-bold">
                    <i class="fas fa-plus-circle me-2"></i> Add New Branch
                </a>
                <a href="#" class="btn btn-dark text-start shadow-sm py-2 px-3 fw-bold">
                    <i class="fas fa-calendar-plus me-2"></i> Schedule a Class
                </a>
                <a href="#" class="btn btn-light border text-start py-2 px-3 fw-bold">
                    <i class="fas fa-user-plus me-2"></i> Invite Staff
                </a>
            </div>
        </div>

        <div class="bg-primary text-white p-4 rounded-4 shadow-sm mb-4">
            <h6 class="fw-bold mb-3"><i class="fas fa-lightbulb me-2"></i> Growth Tip</h6>
            <p class="small opacity-75 mb-0">Gyms that offer early morning classes tend to see a 20% higher retention
                rate in Kigali.</p>
        </div>
    </div>
</div>

<style>
    .glass-card {
        background: rgba(255, 255, 255, 0.95);
    }

    .stat-icon-bg {
        position: absolute;
        right: -10px;
        top: -10px;
        font-size: 5rem;
        opacity: 0.05;
        transform: rotate(-15deg);
        pointer-events: none;
    }

    .smaller {
        font-size: 0.8rem;
    }
</style>
{% endblock %}